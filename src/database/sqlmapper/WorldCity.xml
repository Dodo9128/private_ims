<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.fdreplay.ims.country.WorldCity">
    <!--=======================================
    	목록 조회
     =======================================-->
	<sql id="listWorldCityFromWhere">
		FROM 	world_city WC
		WHERE	1=1
		<if	test='id !=null and id !=""'>
			AND WC.id = #{id}
		</if>
		<if	test='countryId !=null and countryId !=""'>
			AND WC.country_id = #{countryId}
		</if>
		<if	test='stateId !=null and stateId !=""'>
			AND WC.state_id = #{stateId}
		</if>
	</sql>
	
	<select id="listWorldCityCount" parameterType="Map" resultType="Integer">
		<include refid="CommonSQL.selectCount" />
		<include refid="listWorldCityFromWhere" />
    </select>

    <select id="listWorldCity" resultType="Map">
		<include refid="CommonSQL.pagingPreFix" />
		SELECT 	
			WC.id
			, WC.name
			, WC.state_id
			, WC.state_code
			, WC.country_id
			, WC.country_code
			, WC.latitude
			, WC.longitude
			, WC.flag
			, WC.wiki_data_id
		<include refid="listWorldCityFromWhere" />
		<include refid="CommonSQL.orderby" />
		<include refid="CommonSQL.pagingPostFix" />
    </select>
</mapper>